/*
[2018-07-31 오후 3:18] 한석우 컨설턴트 블룸그라인딩시스템 구축: 
dbo.SP_ZONE_MOVE_PROC
 @P_HEAT_NO    VARCHAR(6)
,@P_HEAT_SEQ   INT
,@P_TO_ZONE_CD VARCHAR(3)
,@P_USER_ID    VARCHAR(20)
,@P_PROC_STAT  VARCHAR(3)     OUTPUT
,@P_PROC_MSG   VARCHAR(1000)  OUTPUT

화살표 클릭 
 [dbo].[SP_SCR_TO_L1_RECEIVE_CRE]
 
 2018-08-01
 1. 소재인수관리 HEAT 조회와 기간을 OR 조건으로 검색 ( SP 수정필요)
 2. 인수관리 하위 그리드에 STRAND 컬럼 추가(수정완료)
 3. 스케쥴 버튼이동 추가 --> 수정됨 확인 필요 (수정완료)
 
 2018-08-02 
 1. SP ERR시 ERR MSG 팝업으로 보여줘야한다. (수정완료)
 2. GRD DRV MODE 확인.. (수정완료)
 3. 여러 GRID EXCEL EXPORT 기능 필요... (수정완료,SHEET 분리해서 출력)
 4. 날짜 검색시 BETWEEN 사용안하고 END DATE 를 다음날로 설정해서 >= , < 로 설정.(수정완료)
 5.HEAT NO, 생산본수, 인수본수, TEXT SIZE 조정 및 BOLD화.(수정완료)
 2018-08-06
 1.집진정보관리 수정못하게(수정완료)
 2.집진시각 포맷 다름 동일하게.(수정완료)
 3.설비점검항목관리 ComboBox Center Alignment 설정 ( 수정완료)
 4.정지시간관리 >> 행추가 및 시작일시 자동계산 설정 (수정완료)
 2018-08-07
 1.MPI,쇼트,글라인더,쇼트집진,글라인더집진 실시간 화면 (일부 데이터 가져오는것 외에는 수정완료 2018-08-14)
 2.단위중량관리화면작업 (수정완료 2018-08-10)


2018-08-08

[2018-08-08 오후 1:54] 한석우 컨설턴트 블룸그라인딩시스템 구축: 
[dbo].[SP_MatTakeOverMgmt_CRE]
 @P_HEAT_NO   VARCHAR(6)
,@P_STEEL     VARCHAR(10)
,@P_ITEM_CODE VARCHAR(6)
,@P_MFG_PCS   INT
,@P_MFG_DATE  VARCHAR(8)
,@P_USER_ID   VARCHAR(20)
,@P_PROC_STAT VARCHAR(3)     OUTPUT
,@P_PROC_MSG  VARCHAR(1000)  OUTPUT

2018-08-13
1.MPI 실시간 화면 : 교반 MOTOR 항목이 MPI 조업정보 테이블에 없슴.
2.인수취소시에 에러: 0801 부분인수취소시에 에러 ==> 실적이 이미 발생한것이라 취소 불가능: 이유를 메시지로 표시하기위해 SP 수정함.
3.L1 RECEIVE 이벤트 발생중에 키 중복 에러 발생중. : 2초마다 조업실적,집진실적을 인서트하면서 키 중복으로 생겨남.

2018-08-17
1. Z80 Z90 이동 화살표 추가. (기존 화살표 위치를 옮김 수정완료.)
2. Z91 최근 항목 8개 표시. ( 2018-08-20 수정완료)
3. 인수취소 확인창.(수정완료)
4. up down button 그리드 데이터 없을때 오류(수정완료)
5. 실시간화면에서 HEAT 종료된 BLOOM을 표시할것인가?? (???)
6. HEAT 강제 종료후 진행중일 BLOOM 이 남아있슴. 화면에 표시되어야하는가?, 표시안해서 트레킹 테이블에 남아 다른 BLOOM 이동을 제한함..
7. HEAT AUTO 종료 시켜버림.. 4개 작업중 2개 Z91에 서 END 조건이지만 나머지 2개는 Z00에서 있는 WAT 상태인데 종료됨...
END 시키는 조건에서 PROG_STAT    = 'RUN' ==> PROG_STAT   IN ('RUN','WAT;)  ==> 문제점은 다른곳에 있어서 복원함..
  

2018-08-20
작업내역
1. SP_IF_MPI_OUT: UPSERT 구현(실적이 존재하면 수정 없으면 추가):기존에는 실적 추가만 존재. 작업을 재수행했을시에는 실적 추가 실패남(에러로그에 기록안되는 현상보임)
2. SP_IF_SHT_OUT: UPSERT 구현(실적이 존재하면 수정 없으면 추가):기존에는 실적 추가만 존재. 작업을 재수행했을시에는 실적 추가 실패남(에러로그에 기록안되는 현상보임)
3. HEAT AUTO 종료: 진행중인 HEAT를 종료시키는 현상 보임 
  ==> WHILE 문 에서 SET @UPDATE_YN = 'N'; 추가. ==> 강제 종료 현상은 안보임.

4. HEAT 종료된 BLOOM이 Z00 에 표시되어야하는가? 
  ==> 결론:Z00에 종료된 HEAT 는 표시하지 않는다.

5. 데이터 형식 varchar을(를) numeric(으)로 변환하는 중 오류가 발생했습니다. 
   ==> @P_IF_SEQ --> CONVERT(VARCHAR(10),@P_IF_SEQ), 
       RAISERROR('작업할 정보가 없습니다.', 16, 1); --> RAISERROR(@P_PROC_MSG, 16, 1); 
   관련파일 다수 수정함.

2018-08-21
1. 설비코드 항목 등록시 사용여부 Y
2. HEAT 종료시에 이미진행중인 BLOOM 은 처리하고, Z00 존에서 해당 HEAT 를 보이지 않게 함.
3. 테스트시나리오 작성
4. SP_IF_SHT_DUST_OPER
   SP_IF_GRD_DUST_OPER
   SP_IF_SHT_OPER
   데이터 형식 varchar을(를) numeric(으)로 변환하는 중 오류가 발생했습니다. 
   문제점 발생.
   ==> CASE WHEN ISNUMERIC(DATA_01) ) = 0 THEN '0' ELSE DATA_01 로 변경( '' 데이터를 걸러주기위해서)
5.Z90 => Z20 이동하는 경로가 있는지 여부 있다면 추가 TC 생성해야..
6.권한관리 수정 안되는 현상..(수정완료: double click event 수정)
7.내일 권한에 따른 버튼 설정 확인 필요..

2018-08-22
1. HEAT 종료후 라인에 남아 있는 BLOOM은 인수본수 = 작업수( 'Z90','Z91','Z99','Z50'제외) 조건에 따라 END 처리됨.
 ==> 추호  트레킹 테이블에서 END HEAT 를 지우는 작업을 생성해야함.
 
2. 트레킹 화면 에서 연마석 사용 횟수 보여주게..
==>  SP_IF_RBGW_STR TB_GRD_RBGW_MGMT 테이블 수정하는 부분 수정.([GRD_RBGW_USE_CNT] = 0 부문 삭제)

3. (수정완료)10개화면 늘어날경우 맨처음 생성한 화면 닫게 처리.
4. (수정완료)설비항목관리: 세부사항 수정문제==> 사용여부수정시 수정FLAG 문제 해결


2018-08-23
1. (수정완료)화면관리:업무구분 lov 로 입력하게 한다,(수정완료), 숫자로 화면ID 입력.(수정완료,테스트종료)
2. (수정완료)메뉴관리:화면ID,메뉴ID 숫자입력포맷 변경 
3. (수정완료)인수화면:인수시에만 표면상태 항목 보이게.
4. (수정완료)엑셀출력시 날짜 일만 나오는 문제(수정완료)
5. (수정완료)실적관리화면: 작업시작 역순으로 표시.
6. (수정완료)EQP_CHECK_WR USE_CNT 설비 점검 카운트가 계획 생성되면서 0으로 초기화됨...

2018-08-24
1.(수정완료) SP_IF_GRD_OPER: 드라이브 모드(전체 1(표면+코너),표면2,코너3,부분4)에 따라 실적값 변경 등록.(공통코드참조) , 화면쪽 수정 필요.
2.(수정완료) MAIN FORM: 메뉴 푸른색을 엷게.
3.(수정완료) 설비점검결과: 상태(점검완료, 지연(붉은색)상태 추가)
4.(수정완료) 리플레쉬시 깜빡임 없이 수정사항있을때만 변경.
5.(확인완료) L2 로 실적 전송.(1시간단위로 전송중) SELECT * FROM   L2P120..LEVEL2.L2_RECEIVE_NEW;
6.(확인완료)화면권한설정 column all check 기능 추가.
7.(확인완료)권한 버튼 확인해야..

2018-08-27
1.zone 수동이동시에 최근에 zone에 수정된 놈이 이동되게 처리해야할듯 ( 인터페이스에서) 기존에는 HEAT_NO, HEAT_SEQ 로 구성됨.
2.
2018-08-28
1. 정지실적관리화면: 작업일자 --> 정지일자??
2. MAIN FORM MAXIUM 방법 찾기.
3. 2018-08-27 회의 결과에 따른 수정사항 수정.
2018-08-29
1. 수정사항 수정중.
2.
2018-09-03
1. 그라인딩조업정보: 그라인딩 압력 측정값 60 --> 그라인딩 입력 속도 60 인지확인필요.
--> --<GRD_MTR_ELEC, integer> DATA_14 -- 2018-09-03 박도우 대리: RBGW_ENGY_MV(DATA_14) 값과 동일
2018-09-04
1. 통합테스트 결과.
2018-09-05
1. 공정별추이분석: 화면추가 및 검색조건
  1) 검색조건
    작업기간, 공정, HEAT_NO, HEAT_SEQ, 재작업순번, 
 바인딩 모드에서는 컬럼 설정이 되지않는다..

2018-09-11
1. 연마지석 시작 이벤트 사용 안함.
2. 연마지석 종료 이벤트 를 이용해 DATA 0 인경우 처음 시작 신호로 이용해서 
                                  DATA 1 인경우 종료 신호로 이용해서 
   정주기가 필요. 시작시간이후 30분지난 시점부터
   30분 기준없슴.


3. ZONE 이동화면에서 
   Z00 존인경우 스케줄에서 정보를 읽어와서
   이동시에 순차적으로 Z01을 거쳐서 TARGET ZONE 으로 이동하는 방식으로 전개
   --> ZONE 이동 화면에서 PROG_STAT IN ('RUN','WAT') 를 추가해서 이동 테스트 필요.
4. 스케줄화면에서 HEAT 취소 ( 계획인경우만 가능)
5. ZONE FONT 확대
6. ZONE Z00  HEAT_NO 진행중인 BLOOM수/ 전체 BLOOM 수
7. 
*/